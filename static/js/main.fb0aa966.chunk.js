(this["webpackJsonppost-app"]=this["webpackJsonppost-app"]||[]).push([[0],{115:function(e,t,n){e.exports=n.p+"static/media/logo.ee61ca49.svg"},12:function(e,t,n){e.exports={container:"Posts_container__2eWO6",post:"Posts_post__xL0Lx",blocks:"Posts_blocks__8_v6Q",block1:"Posts_block1__mrsiS",userimg:"Posts_userimg__2RNTK",block2:"Posts_block2__3a3G4",title:"Posts_title__hpLe3",editBtn:"Posts_editBtn__1ijR4",deleteBtn:"Posts_deleteBtn__2b7he"}},120:function(e,t,n){e.exports=n.p+"static/media/preloader.e090b2b4.svg"},121:function(e,t,n){e.exports={Modal:"ModalWindow_Modal__2ES7F",Overlay:"ModalWindow_Overlay__kvp0E"}},125:function(e,t,n){e.exports=n(260)},130:function(e,t,n){},131:function(e,t,n){},26:function(e,t,n){e.exports={nav:"Nav_nav__3SNcg",item:"Nav_item__p3Pdi",activeLink:"Nav_activeLink__35Cwx"}},260:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(36),s=n.n(r),c=(n(130),n(131),n(23)),i=n(72),u=n.n(i),l=n(115),m=n.n(l),d=function(e){return o.a.createElement("header",{className:u.a.header},o.a.createElement("div",{className:u.a.logo},o.a.createElement("img",{src:m.a,alt:"logo"})))},p=n(26),_=n.n(p),g=n(18),E=function(e){return o.a.createElement("nav",{className:_.a.nav},o.a.createElement("ul",{className:_.a.list},o.a.createElement("li",{className:_.a.item},o.a.createElement(g.b,{to:"/posts",activeClassName:_.a.activeLink},"Posts")),o.a.createElement("li",{className:_.a.item},o.a.createElement(g.b,{to:"/users",activeClassName:_.a.activeLink},"Users"))))},f=n(9),h=n(12),b=n.n(h),P=n(7),v=n.n(P),S=n(15),O=n(124),T=n(6),k=n(118).create({baseURL:"http://localhost:3000/",headers:{"Content-type":"application/json; charset=UTF-8"}}),w=function(){return k.get("users").then((function(e){return e.data}))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return k.get("posts?_page=".concat(e,"&_limit=").concat(t))},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return k.post("posts",{title:e,body:t,userId:n}).then((function(e){return e.data}))},C=function(e){return k.get("posts/".concat(e)).then((function(e){return e.data}))},I=function(e,t,n,a){return k.put("posts/".concat(e),{id:e,userId:t,title:n,body:a}).then((function(e){return e.data}))},F=function(e){return k.delete("posts/".concat(e))},j=function(e){return k.get("comments?postId=".concat(e))},G={posts:[],pageSize:3,totalPostsCount:0,currentPage:1,isFetching:!1,isConfirmed:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return Object(T.a)({},e,{posts:[].concat(Object(O.a)(e.posts),[t.payload])});case"SET_POSTS":return Object(T.a)({},e,{posts:t.posts});case"SET_PAGE":return Object(T.a)({},e,{currentPage:t.pageNumber});case"SET_TOTAL_POSTS":return Object(T.a)({},e,{totalPostsCount:t.count});case"TOGGLE_IS_FETCHING":return Object(T.a)({},e,{isFetching:t.isFetching});case"CONFIRM_POST_DELETING":return Object(T.a)({},e,{isConfirmed:t.isConfirmed});default:return e}},B=function(e,t,n,a){return{type:"ADD_POST",payload:{userId:e,id:t,title:n,body:a}}},U=function(e){return{type:"SET_PAGE",pageNumber:e}},L=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},z=function(e,t){return function(){var n=Object(S.a)(v.a.mark((function n(a){var o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(L(!0)),a(U(e)),n.next=4,N(e,t);case 4:o=n.sent,a({type:"SET_POSTS",posts:o.data}),a({type:"SET_TOTAL_POSTS",count:o.headers["x-total-count"]}),a(L(!1));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},M={id:null,userId:null,title:"",body:"",isFetching:!1,isUpdated:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EDIT_POST":return Object(T.a)({},e,{},t.payload);case"TOGGLE_IS_FETCHING":return Object(T.a)({},e,{isFetching:t.isFetching});case"TOGGLE_UPDATING_PROGRESS":return Object(T.a)({},e,{isUpdated:t.isUpdated});default:return e}},H=function(e,t,n,a){return{type:"SET_EDIT_POST",payload:{id:e,userId:t,title:n,body:a}}},R=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},D=function(e){return{type:"TOGGLE_UPDATING_PROGRESS",isUpdated:e}},W={comments:[],isFetching:!1,isCommentsShowing:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COMMENTS":return Object(T.a)({},e,{comments:t.comments});case"TOGGLE_IS_FETCHING":return Object(T.a)({},e,{isFetching:t.isFetching});case"TOGGLE_COMMENT_SHOWING":return Object(T.a)({},e,{isCommentsShowing:t.isCommentsShowing});default:return e}},J=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},K=n(119),q=Object(K.a)((function(e){return e.posts.posts}),(function(e){return e.filter((function(e){return!0}))})),Q=function(e){return e.posts.pageSize},V=function(e){return e.posts.totalPostsCount},$=function(e){return e.posts.currentPage},X=function(e){return e.posts.isFetching},Z=n(21),ee=n(120),te=n.n(ee),ne=n(76),ae=n.n(ne),oe=function(){return o.a.createElement("div",{className:ae.a.preloader},o.a.createElement("div",{className:ae.a.preloader__img},o.a.createElement("img",{src:te.a,alt:""})))},re=n(77),se=n.n(re),ce=n(121),ie=n.n(ce);se.a.setAppElement("#root");var ue=function(e){return o.a.createElement("div",null,o.a.createElement(se.a,{isOpen:e.modalIsOpen},o.a.createElement("h3",null,e.modalText),o.a.createElement("div",{className:ie.a.btns},o.a.createElement("button",{onClick:function(){e.setModalIsOk(!0),e.setModalIsOpen(!1)}},"OK"),o.a.createElement("button",{onClick:function(){e.setModalIsOpen(!1)}},"Cancel"))))},le=function(e){var t=Object(a.useState)(!1),n=Object(Z.a)(t,2),r=n[0],s=n[1];return Object(a.useEffect)((function(){!0===r&&(e.deletePostThunk(e.postId,e.currentPage,e.pageSize),console.log("deletePost"))})),o.a.createElement("div",null,o.a.createElement(ue,{modalText:"are you sure, that you want to delete this post?",modalIsOpen:e.modalIsOpen,setModalIsOpen:e.setModalIsOpen,modalIsOk:r,setModalIsOk:s}))},me=n(52),de=n.n(me),pe=n(32),_e=n.n(pe),ge=function(e){var t=e.comment;return o.a.createElement("div",{className:_e.a.blocks},o.a.createElement("div",{className:_e.a.block1}),o.a.createElement("div",{className:_e.a.block2},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("span",{className:_e.a.title},t.id,". ",t.email)),o.a.createElement("div",null,o.a.createElement("p",{className:_e.a.body},null!=t.body?t.body:"without text")))))},Ee=Object(f.b)((function(e){return{comments:e.comments.comments}}),{getCommentsThunk:function(e){return function(){var t=Object(S.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(J(!0)),t.next=3,j(e);case 3:a=t.sent,n({type:"SET_COMMENTS",comments:a.data}),n(J(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(a.useEffect)((function(){!0===e.showComments&&e.getCommentsThunk(e.postId)}),[e]),e.isFetching?o.a.createElement(oe,null):o.a.createElement("div",null,e.comments.map((function(t){return e.postId===t.postId&&o.a.createElement(ge,{key:t.id,comment:t})})))})),fe=function(e){var t=Object(a.useState)(!1),n=Object(Z.a)(t,2),r=n[0],s=n[1];return o.a.createElement("div",null,o.a.createElement("div",{className:b.a.blocks},o.a.createElement("div",{className:b.a.block1},o.a.createElement("div",{className:b.a.userimg},o.a.createElement("img",{src:de.a,alt:"img"}))),o.a.createElement("div",{className:b.a.block2},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("span",{className:b.a.title},e.post.id,". ",e.post.title),o.a.createElement(g.b,{to:"/post/"+e.post.id},o.a.createElement("button",{className:b.a.editBtn},"Edit")),o.a.createElement("button",{className:b.a.deleteBtn,onClick:e.deletePost},"Delete")),o.a.createElement("div",null,o.a.createElement("p",{className:b.a.body},null!=e.post.body?e.post.body:"without text")),o.a.createElement("div",null,!r&&o.a.createElement("button",{onClick:function(){s(!0)}},"Show comments"),r&&o.a.createElement("button",{onClick:function(){s(!1)}},"Hide comments"))))),o.a.createElement(Ee,{postId:e.post.id,showComments:r,setShowComments:s}))},he=function(e){var t=Object(a.useState)(!1),n=Object(Z.a)(t,2),r=n[0],s=n[1];if(e.isFetching)return o.a.createElement(oe,null);var c=function(){s(!0)};return o.a.createElement("div",null,e.posts.map((function(t){return o.a.createElement("div",{className:b.a.post},o.a.createElement(fe,{key:t.id,post:t,currentPage:e.currentPage,pageSize:e.pageSize,deletePost:c,isCommentsShowing:e.isCommentsShowing,toggleCommentsShowing:e.toggleCommentsShowing}),o.a.createElement(le,{deletePostThunk:e.deletePostThunk,modalIsOpen:r,setModalIsOpen:s,postId:t.id,currentPage:e.currentPage,pageSize:e.pageSize}))})))},be=n(78),Pe=n.n(be),ve=function(e){for(var t=e.totalCount,n=e.pageSize,r=e.currentPage,s=e.paginate,c=e.portionSize,i=void 0===c?10:c,u=Math.ceil(t/n),l=[],m=1;m<=u;m++)l.push(m);var d=Math.ceil(u/i),p=Object(a.useState)(1),_=Object(Z.a)(p,2),g=_[0],E=_[1],f=(g-1)*i+1,h=g*i;return o.a.createElement("div",{className:Pe.a.pages},g>1&&o.a.createElement("button",{onClick:function(){E(g-1)}},"prev"),l.filter((function(e){return e>=f&&e<=h})).map((function(e){return o.a.createElement("span",{key:e,className:r===e&&Pe.a.selectedPage,onClick:function(t){s(e)}},e)})),d>g&&o.a.createElement("button",{onClick:function(){E(g+1)}},"next"))},Se=n(42),Oe=n.n(Se),Te=n(262),ke=n(261),we=Object(ke.a)({form:"newPost"})((function(e){return o.a.createElement("div",{className:Oe.a.formBlock},o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement("div",{className:Oe.a.newPostTitle},o.a.createElement(Te.a,{component:"input",name:"postTitle",placeholder:"new post title..."})),o.a.createElement("div",{className:Oe.a.newPostBody},o.a.createElement(Te.a,{component:"textarea",name:"postBody",placeholder:"new post body..."})),o.a.createElement("div",{className:Oe.a.newPostButton},o.a.createElement("button",null,"Add post"))))})),Ne=Object(f.b)((function(e){return{posts:q(e),pageSize:Q(e),totalCount:V(e),currentPage:$(e),isFetching:X(e),isCommentsShowing:e.comments.isCommentsShowing}}),{setCurrentPage:U,getPostsThunk:z,addPostThunk:function(e,t,n,a,o){return function(){var r=Object(S.a)(v.a.mark((function r(s){var c;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(L(!0)),r.next=3,y(e,t,o);case 3:c=r.sent,s(B(c.userId,c.id,e,t)),s(z(n,a)),s(L(!1));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deletePostThunk:function(e,t,n){return function(){var a=Object(S.a)(v.a.mark((function a(o){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(L(!0)),a.next=3,F(e);case 3:r=a.sent,console.log(r),o(z(t,n)),o(L(!1)),o({type:"CONFIRM_POST_DELETING",isConfirmed:!1});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},toggleUpdatingProgress:D,toggleCommentsShowing:function(e){return{type:"TOGGLE_COMMENT_SHOWING",isCommentsShowing:e}}})((function(e){Object(a.useEffect)((function(){e.getPostsThunk(e.currentPage,e.pageSize),e.toggleUpdatingProgress(!1)}),[]);return o.a.createElement("div",{className:b.a.container},o.a.createElement(ve,{paginate:function(t){e.getPostsThunk(t,e.pageSize)},pageSize:e.pageSize,totalCount:e.totalCount,currentPage:e.currentPage}),o.a.createElement(he,{posts:e.posts,isFetching:e.isFetching,deletePostThunk:e.deletePostThunk,currentPage:e.currentPage,pageSize:e.pageSize,toggleCommentsShowing:e.toggleCommentsShowing,isCommentsShowing:e.isCommentsShowing}),o.a.createElement(we,{onSubmit:function(t){e.addPostThunk(t.postTitle,t.postBody,e.currentPage,e.pageSize)}}))})),ye=n(5),Ce=n(33),Ie=n.n(Ce),Fe=Object(ke.a)({form:"editPost"})((function(e){return o.a.createElement("div",{className:Ie.a.editFormBlock},o.a.createElement("h1",{className:Ie.a.title},"Edit Post"),o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement("div",{className:Ie.a.newPostTitle},o.a.createElement(Te.a,{component:"input",name:"postEditTitle"})),o.a.createElement("div",{className:Ie.a.newPostBody},o.a.createElement(Te.a,{component:"textarea",name:"postEditBody"})),o.a.createElement("div",{className:Ie.a.newPostButton},o.a.createElement("button",null,"Update post"))))})),je=void 0,Ge=Object(ye.d)(Object(f.b)((function(e){return{postId:e.editPost.id,userId:e.editPost.userId,editTitle:e.editPost.title,editBody:e.editPost.body,isFetching:e.editPost.isFetching,isUpdated:e.editPost.isUpdated,initialValues:{postEditTitle:e.editPost.title,postEditBody:e.editPost.body}}}),{getEditPost:function(e){return function(){var t=Object(S.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(R(!0)),t.next=3,C(e);case 3:a=t.sent,n(H(a.id,a.userId,a.title,a.body)),n(R(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateEditPost:function(e,t,n,a){return function(){var o=Object(S.a)(v.a.mark((function o(r){var s;return v.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r(R(!0)),o.next=3,I(e,t,n,a);case 3:s=o.sent,r(H(s.id,s.userId,s.title,s.body)),r(R(!1)),r(D(!0));case 7:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},setEditPost:H}),c.f)((function(e){if(Object(a.useEffect)((function(){var t=e.match.params.id;t||je.props.history.push("/post/"+e.postId),e.getEditPost(t)}),[]),e.isFetching)return o.a.createElement(oe,null);return e.isUpdated?o.a.createElement(c.a,{to:"/posts"}):o.a.createElement(Fe,Object.assign({onSubmit:function(t){e.updateEditPost(e.postId,e.userId,t.postEditTitle,t.postEditBody)}},e))})),xe={users:[],pageSize:3,totalUsersCount:0,currentPage:1,isFetching:!1},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(T.a)({},e,{users:t.users});case"SET_PAGE":return Object(T.a)({},e,{currentPage:t.pageNumber});case"SET_TOTAL_USERS":return Object(T.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(T.a)({},e,{isFetching:t.isFetching});default:return e}},Ue=function(e){return{type:"SET_PAGE",pageNumber:e}},Le=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},ze=function(e){return e.users.users},Me=function(e){return e.users.pageSize},Ae=function(e){return e.users.totalUsersCount},He=function(e){return e.users.currentPage},Re=function(e){return e.users.isFetching},De=n(27),We=n.n(De),Ye=o.a.memo((function(e){return e.isFetching?o.a.createElement(oe,null):o.a.createElement("div",null,e.users.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement("div",{className:We.a.blocks},o.a.createElement("div",{className:We.a.block1},o.a.createElement("div",{className:We.a.userimg},o.a.createElement("img",{src:de.a,alt:"img"}))),o.a.createElement("div",{className:We.a.block2},o.a.createElement("div",null,o.a.createElement("p",{className:We.a.username},e.id,". ",e.name),o.a.createElement("p",{className:We.a.email},null!=e.email?e.email:"without email")))))})))})),Je=Object(f.b)((function(e){return{users:ze(e),pageSize:Me(e),totalCount:Ae(e),currentPage:He(e),isFetching:Re(e)}}),{setCurrentPage:Ue,getUsersThunk:function(e){return function(){var t=Object(S.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Le(!0)),n(Ue(e)),t.next=4,w();case 4:a=t.sent,n({type:"SET_USERS",users:a}),n((a["x-total-count"],{type:"SET_TOTAL_USERS",count:10})),n(Le(!1));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){Object(a.useEffect)((function(){e.getUsersThunk(e.currentPage)}),[]);var t=e.currentPage*e.pageSize,n=t-e.pageSize,r=e.users.slice(n,t);return o.a.createElement("div",null,o.a.createElement(ve,{paginate:function(t){e.getUsersThunk(t)},pageSize:e.pageSize,totalCount:e.totalCount,currentPage:e.currentPage}),o.a.createElement(Ye,{users:r,isFetching:e.isFetching}))})),Ke=Object(c.f)((function(e){return o.a.createElement("div",{className:"App-wrapper"},o.a.createElement(d,null),o.a.createElement(E,null),o.a.createElement("div",{className:"App-content"},o.a.createElement(c.b,{path:"/posts",render:function(){return o.a.createElement(Ne,null)}}),o.a.createElement(c.b,{path:"/users",render:function(){return o.a.createElement(Je,null)}}),o.a.createElement(c.b,{path:"/post/:id?",render:function(){return o.a.createElement(Ge,null)}})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=n(123),Qe=n(263),Ve=Object(ye.c)({form:Qe.a,posts:x,users:Be,editPost:A,comments:Y}),$e=Object(ye.e)(Ve,Object(ye.a)(qe.a));window.store=$e;var Xe=$e;s.a.render(o.a.createElement(g.a,null,o.a.createElement(f.a,{store:Xe},o.a.createElement(Ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},27:function(e,t,n){e.exports={blocks:"Users_blocks__1eKMH",block1:"Users_block1__dq-SH",userimg:"Users_userimg__kAtzY",block2:"Users_block2__3UMb1",followbtn:"Users_followbtn__1nCf_",location:"Users_location__2-SDi",username:"Users_username__1LYIr",status:"Users_status__3lJwP",country:"Users_country__3boOy",pages:"Users_pages__1TTxc",selectedPage:"Users_selectedPage__z6iwL"}},32:function(e,t,n){e.exports={blocks:"Comments_blocks__1rrbF",block1:"Comments_block1__19t0D",userimg:"Comments_userimg__25Lgy",block2:"Comments_block2__2HzrF",title:"Comments_title__2-9ng",editBtn:"Comments_editBtn__1pLF2",deleteBtn:"Comments_deleteBtn__1qfIx"}},33:function(e,t,n){e.exports={editFormBlock:"PostEditForm_editFormBlock__3Eb_4",newPostTitle:"PostEditForm_newPostTitle__1Ts-m",newPostBody:"PostEditForm_newPostBody__YDTM6",newPostButton:"PostEditForm_newPostButton__2MnAH",title:"PostEditForm_title__3R0r3"}},42:function(e,t,n){e.exports={formBlock:"PostsForm_formBlock__2YeQz",newPostTitle:"PostsForm_newPostTitle__2WNR3",newPostBody:"PostsForm_newPostBody__12mgN",newPostButton:"PostsForm_newPostButton__BeCa3"}},52:function(e,t,n){e.exports=n.p+"static/media/user.d00d5149.png"},72:function(e,t,n){e.exports={header:"Header_header__9bdIB",logo:"Header_logo__1v1jP"}},76:function(e,t,n){e.exports={preloader:"Preloader_preloader__t6zGf",preloader__img:"Preloader_preloader__img__10Woo"}},78:function(e,t,n){e.exports={pages:"Paginator_pages__2gWB-",selectedPage:"Paginator_selectedPage__1bt24"}}},[[125,1,2]]]);
//# sourceMappingURL=main.fb0aa966.chunk.js.map